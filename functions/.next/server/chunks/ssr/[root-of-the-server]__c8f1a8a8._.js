module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},62212,a=>{a.n(a.i(66114))},44067,a=>{a.n(a.i(36102))},54660,a=>{"use strict";a.s(["propertySchema",()=>c]);var b=a.i(53112);let c=b.z.object({titleAr:b.z.string().min(1,"العنوان مطلوب").min(3,"العنوان يجب أن يكون على الأقل 3 أحرف").max(200,"العنوان يجب أن يكون أقل من 200 حرف"),descriptionAr:b.z.string().max(2e3,"الوصف يجب أن يكون أقل من 2000 حرف").optional(),city:b.z.string().min(1,"المدينة مطلوبة").max(100,"اسم المدينة يجب أن يكون أقل من 100 حرف"),district:b.z.string().max(100,"اسم الحي يجب أن يكون أقل من 100 حرف").optional(),address:b.z.string().max(300,"العنوان التفصيلي يجب أن يكون أقل من 300 حرف").optional(),purpose:b.z.enum(["sale","rent"],{errorMap:()=>({message:"نوع المعاملة مطلوب (بيع أو إيجار)"})}),type:b.z.enum(["apartment","villa","land","office","shop"],{errorMap:()=>({message:"نوع العقار مطلوب"})}),areaM2:b.z.preprocess(a=>{let b=Number(a);return isNaN(b)||0===b?void 0:b},b.z.number().min(1,"المساحة يجب أن تكون أكبر من 0").max(1e5,"المساحة كبيرة جداً").optional()),bedrooms:b.z.preprocess(a=>{let b=Number(a);return isNaN(b)||0===b?void 0:b},b.z.number().min(1,"عدد غرف النوم يجب أن يكون أكبر من 0").max(50,"عدد غرف النوم كبير جداً").optional()),bathrooms:b.z.preprocess(a=>{let b=Number(a);return isNaN(b)||0===b?void 0:b},b.z.number().min(1,"عدد دورات المياه يجب أن يكون أكبر من 0").max(20,"عدد دورات المياه كبير جداً").optional()),floor:b.z.preprocess(a=>{let b=Number(a);return isNaN(b)?void 0:b},b.z.number().min(-5,"رقم الطابق غير صحيح").max(200,"رقم الطابق كبير جداً").optional()),price:b.z.number().min(1,"السعر مطلوب").max(1e9,"السعر كبير جداً"),status:b.z.enum(["available","sold","rented","off-market"],{errorMap:()=>({message:"حالة العقار مطلوبة"})}),features:b.z.array(b.z.string()).max(20,"لا يمكن إضافة أكثر من 20 ميزة").optional(),yearBuilt:b.z.preprocess(a=>{let b=Number(a);return isNaN(b)||0===b?void 0:b},b.z.number().min(1800,"سنة البناء غير صحيحة").max(new Date().getFullYear()+5,"سنة البناء في المستقبل").optional()),lat:b.z.number().min(-90,"خط العرض غير صحيح").max(90,"خط العرض غير صحيح").transform(a=>isNaN(a)?void 0:a).optional(),lng:b.z.number().min(-180,"خط الطول غير صحيح").max(180,"خط الطول غير صحيح").transform(a=>isNaN(a)?void 0:a).optional(),images:b.z.array(b.z.string().min(1,"رابط الصورة مطلوب")).min(1,"يجب إضافة صورة واحدة على الأقل").max(20,"لا يمكن إضافة أكثر من 20 صورة"),featured:b.z.boolean().optional()});b.z.object({city:b.z.string().optional(),district:b.z.string().optional(),type:b.z.enum(["apartment","villa","land","office","shop"]).optional(),purpose:b.z.enum(["sale","rent"]).optional(),bedrooms:b.z.number().min(0).optional(),bathrooms:b.z.number().min(0).optional(),minArea:b.z.number().min(0).optional(),maxArea:b.z.number().min(0).optional(),minPrice:b.z.number().min(0).optional(),maxPrice:b.z.number().min(0).optional(),status:b.z.enum(["available","sold","rented","off-market"]).optional(),featured:b.z.boolean().optional()})},84631,a=>{"use strict";a.s(["createPropertySlug",()=>e,"generateUniqueSlug",()=>d]);let b={ا:"a",أ:"a",إ:"i",آ:"aa",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"dh",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"d",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ء:"a",ؤ:"w",ئ:"y"," ":"-","-":"-",_:"-"},c={فيلا:"villa",شقة:"apartment",أرض:"land",مكتب:"office",محل:"shop",الرياض:"riyadh",جدة:"jeddah",مكة:"makkah",المدينة:"medina",الدمام:"dammam",الخبر:"khobar",الطائف:"taif",بريدة:"buraidah",تبوك:"tabuk",حائل:"hail",نجران:"najran",جازان:"jazan","الحدود الشمالية":"northern-borders",الباحة:"al-baha",عسير:"asir",الملقا:"malqa",النخيل:"al-nakheel",الروضة:"al-rawdah",السلامة:"al-salamah",النسيم:"al-naseem",الورود:"al-ward",الزهور:"al-zuhur",الربيع:"al-rabie",الصيف:"al-sayf",الخريف:"al-kharif",الشتاء:"al-shita"};async function d(a,b=[]){let c=a,e=1;for(;b.includes(c);)c=`${a}-${e}`,e++;return c}function e(a){if(!a)return"";let d=a.toLowerCase().trim();for(let[a,b]of Object.entries(c)){let c=RegExp(a,"g");d=d.replace(c,b)}let e="";for(let a of d)b[a]?e+=b[a]:/[a-z0-9]/.test(a)?e+=a:/[\s\-_]/.test(a)&&(e+="-");return(e=e.replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,100))||"property"}},1907,a=>a.a(async(b,c)=>{try{a.s(["createProperty",()=>l,"deleteProperty",()=>n,"getProperty",()=>p,"getPropertyBySlug",()=>q,"listAdminProperties",()=>o,"updateProperty",()=>m]);var d=a.i(37936);a.i(55781);var e=a.i(30316),f=a.i(41462),g=a.i(54660),h=a.i(84631),i=a.i(55742),j=a.i(13095),k=b([e,f,i]);async function l(a){try{let b=await (0,f.requireAdmin)(),c=g.propertySchema.parse(a),d=(0,h.createPropertySlug)(c.titleAr),j=(await e.adminDb.collection("properties").select("slug").get()).docs.map(a=>a.data().slug),k=await (0,h.generateUniqueSlug)(d,j),l={...c,slug:k,createdAt:i.FieldValue.serverTimestamp(),updatedAt:i.FieldValue.serverTimestamp(),createdBy:b.uid},m=await e.adminDb.collection("properties").add(l),n=await m.get(),o=n.data(),p={id:n.id,...o,price:Number(o.price)||0,areaM2:o.areaM2?Number(o.areaM2):void 0,bedrooms:o.bedrooms?Number(o.bedrooms):void 0,bathrooms:o.bathrooms?Number(o.bathrooms):void 0,floor:o.floor?Number(o.floor):void 0,yearBuilt:o.yearBuilt?Number(o.yearBuilt):void 0,lat:o.lat?Number(o.lat):void 0,lng:o.lng?Number(o.lng):void 0,createdAt:o.createdAt?.toDate()||new Date,updatedAt:o.updatedAt?.toDate()||new Date};return{success:!0,data:p}}catch(a){return console.error("Error creating property:",a),{success:!1,error:a instanceof Error?a.message:"حدث خطأ أثناء إنشاء العقار"}}}async function m(a,b){try{let c=await (0,f.requireAdmin)(),d=g.propertySchema.parse(b),j=await e.adminDb.collection("properties").doc(a).get();if(!j.exists)return{success:!1,error:"العقار غير موجود"};let k=j.data();if(k?.createdBy!==c.uid)return{success:!1,error:"ليس لديك صلاحية لتعديل هذا العقار"};let l=k?.slug;if(d.titleAr!==k?.titleAr){let a=(0,h.createPropertySlug)(d.titleAr),b=(await e.adminDb.collection("properties").where("slug","!=",l).select("slug").get()).docs.map(a=>a.data().slug);l=await (0,h.generateUniqueSlug)(a,b)}let m={...d,slug:l,updatedAt:i.FieldValue.serverTimestamp()};await e.adminDb.collection("properties").doc(a).update(m);let n=await e.adminDb.collection("properties").doc(a).get(),o={id:n.id,...n.data(),createdAt:n.data()?.createdAt?.toDate()||new Date,updatedAt:n.data()?.updatedAt?.toDate()||new Date};return{success:!0,data:o}}catch(a){return console.error("Error updating property:",a),{success:!1,error:a instanceof Error?a.message:"حدث خطأ أثناء تحديث العقار"}}}async function n(b){try{let c=await (0,f.requireAdmin)(),d=await e.adminDb.collection("properties").doc(b).get();if(!d.exists)return{success:!1,error:"العقار غير موجود"};let g=d.data();if(g?.createdBy!==c.uid)return{success:!1,error:"ليس لديك صلاحية لحذف هذا العقار"};if(g?.images?.length>0){let{deletePropertyImages:b}=await a.A(23647);await b(g.images)}return await e.adminDb.collection("properties").doc(b).delete(),{success:!0}}catch(a){return console.error("Error deleting property:",a),{success:!1,error:a instanceof Error?a.message:"حدث خطأ أثناء حذف العقار"}}}async function o({q:a="",page:b=1,pageSize:c=10}={}){try{await (0,f.requireAdmin)();let d=e.adminDb.collection("properties").orderBy("updatedAt","desc");if(a.trim()){let e=(await d.get()).docs.filter(b=>{let c=b.data(),d=a.toLowerCase();return c.titleAr?.toLowerCase().includes(d)||c.city?.toLowerCase().includes(d)||c.district?.toLowerCase().includes(d)}),f=(b-1)*c,g=e.slice(f,f+c).map(a=>{let b=a.data();return{id:a.id,...b,price:Number(b.price)||0,areaM2:b.areaM2?Number(b.areaM2):void 0,bedrooms:b.bedrooms?Number(b.bedrooms):void 0,bathrooms:b.bathrooms?Number(b.bathrooms):void 0,floor:b.floor?Number(b.floor):void 0,yearBuilt:b.yearBuilt?Number(b.yearBuilt):void 0,lat:b.lat?Number(b.lat):void 0,lng:b.lng?Number(b.lng):void 0,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date}});return{success:!0,data:{properties:g,total:e.length,page:b,pageSize:c,totalPages:Math.ceil(e.length/c)}}}{let a=(await d.get()).size,e=d.limit(c).offset((b-1)*c),f=(await e.get()).docs.map(a=>{let b=a.data();return{id:a.id,...b,price:Number(b.price)||0,areaM2:b.areaM2?Number(b.areaM2):void 0,bedrooms:b.bedrooms?Number(b.bedrooms):void 0,bathrooms:b.bathrooms?Number(b.bathrooms):void 0,floor:b.floor?Number(b.floor):void 0,yearBuilt:b.yearBuilt?Number(b.yearBuilt):void 0,lat:b.lat?Number(b.lat):void 0,lng:b.lng?Number(b.lng):void 0,createdAt:b.createdAt?.toDate()||new Date,updatedAt:b.updatedAt?.toDate()||new Date}});return{success:!0,data:{properties:f,total:a,page:b,pageSize:c,totalPages:Math.ceil(a/c)}}}}catch(a){return console.error("Error listing properties:",a),{success:!1,error:a instanceof Error?a.message:"حدث خطأ أثناء جلب العقارات"}}}async function p(a){try{let b=await e.adminDb.collection("properties").doc(a).get();if(!b.exists)return{success:!1,error:"العقار غير موجود"};let c=b.data(),d={id:b.id,...c,price:Number(c.price)||0,areaM2:c.areaM2?Number(c.areaM2):void 0,bedrooms:c.bedrooms?Number(c.bedrooms):void 0,bathrooms:c.bathrooms?Number(c.bathrooms):void 0,floor:c.floor?Number(c.floor):void 0,yearBuilt:c.yearBuilt?Number(c.yearBuilt):void 0,lat:c.lat?Number(c.lat):void 0,lng:c.lng?Number(c.lng):void 0,createdAt:c.createdAt?.toDate()||new Date,updatedAt:c.updatedAt?.toDate()||new Date};return{success:!0,data:d}}catch(a){return console.error("Error getting property:",a),{success:!1,error:a instanceof Error?a.message:"حدث خطأ أثناء جلب العقار"}}}async function q(a){try{let b=await e.adminDb.collection("properties").where("slug","==",a).limit(1).get();if(b.empty)return{success:!1,error:"العقار غير موجود"};let c=b.docs[0],d=c.data(),f={id:c.id,...d,price:Number(d.price)||0,areaM2:d.areaM2?Number(d.areaM2):void 0,bedrooms:d.bedrooms?Number(d.bedrooms):void 0,bathrooms:d.bathrooms?Number(d.bathrooms):void 0,floor:d.floor?Number(d.floor):void 0,yearBuilt:d.yearBuilt?Number(d.yearBuilt):void 0,lat:d.lat?Number(d.lat):void 0,lng:d.lng?Number(d.lng):void 0,createdAt:d.createdAt?.toDate()||new Date,updatedAt:d.updatedAt?.toDate()||new Date};return{success:!0,data:f}}catch(a){return console.error("Error getting property by slug:",a),{success:!1,error:a instanceof Error?a.message:"حدث خطأ أثناء جلب العقار"}}}[e,f,i]=k.then?(await k)():k,(0,j.ensureServerEntryExports)([l,m,n,o,p,q]),(0,d.registerServerReference)(l,"40728a00713e0a8d961fd70d73d6d5610f7505508c",null),(0,d.registerServerReference)(m,"6062741cf892647431c0274f4a4fbbdfbf0869499d",null),(0,d.registerServerReference)(n,"4003faa83b87cfe704c05fb4d94472f0948c37ca26",null),(0,d.registerServerReference)(o,"4007d9c77e3d65fd9b4a6b56546fa2039728e51603",null),(0,d.registerServerReference)(p,"40307625659fa94fd20fd32cbffdf1797e2888930f",null),(0,d.registerServerReference)(q,"40a3c87fe87607f422af880f1e9ba31c3c8f901026",null),c()}catch(a){c(a)}},!1),54567,a=>a.a(async(b,c)=>{try{a.s([]);var d=a.i(1907),e=b([d]);[d]=e.then?(await e)():e,c()}catch(a){c(a)}},!1),13670,a=>a.a(async(b,c)=>{try{a.s(["40728a00713e0a8d961fd70d73d6d5610f7505508c",()=>e.createProperty]);var d=a.i(54567),e=a.i(1907),f=b([d,e]);[d,e]=f.then?(await f)():f,c()}catch(a){c(a)}},!1),63933,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/app/admin/properties/new/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/admin/properties/new/page.tsx <module evaluation>","default")},26370,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/app/admin/properties/new/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/admin/properties/new/page.tsx","default")},11866,a=>{"use strict";a.i(63933);var b=a.i(26370);a.n(b)},23647,a=>{a.v(b=>Promise.all(["server/chunks/ssr/[root-of-the-server]__495acb60._.js","server/chunks/ssr/_9136f9c2._.js","server/chunks/ssr/[root-of-the-server]__346b09db._.js"].map(b=>a.l(b))).then(()=>b(21614)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c8f1a8a8._.js.map